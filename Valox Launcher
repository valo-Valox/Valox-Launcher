-- Multi-Hub Launcher for Roblox (Rayfield)
-- Simple, clean, remembers last selection
-- Replace URL placeholders with real raw script URLs

-- safe cleanup of previous ui
if getgenv().Rayfield and type(getgenv().Rayfield.Destroy) == "function" then
    pcall(function() getgenv().Rayfield:Destroy() end)
end
getgenv().Rayfield = nil

-- create Rayfield
local ok, Rayfield = pcall(function()
    return loadstring(game:HttpGet("https://sirius.menu/rayfield"))()
end)
if not ok or not Rayfield then
    warn("Failed to load Rayfield")
    return
end
getgenv().Rayfield = Rayfield

local Window = Rayfield:CreateWindow({
    Name = "Multi Hub Launcher",
    LoadingTitle = "Launcher",
    LoadingSubtitle = "By Valox",
    Theme = "Ocean",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MultiHubLauncher",
        FileName = "LauncherConfig"
    },
    KeySystem = false
})

local Tab = Window:CreateTab("Hubs", "rewind")
local Section = Tab:CreateSection("Select a hub to load")

-- hub list (name -> url)
local hubs = {
    ["Valox Hub"]   = "https://raw.githubusercontent.com/valo-Valox/Valox-Hub/refs/heads/main/Valox%20Hub",
    ["H4x Scripts"] = "https://raw.githubusercontent.com/H4xScripts/Loader/refs/heads/main/loader.lua",
    ["VoidWare"]   = "https://raw.githubusercontent.com/VapeVoidware/VWExtra/main/NightsInTheForest.lua",
    ["Infinite Yield"]  = "https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source",
    ["Vertex"]  = "https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring"
}

for name, url in pairs(hubs) do
    Tab:CreateButton({
        Name = "Load "..name,
        Callback = function()
            if not url or url == "" then
                Rayfield:Notify({ Title = "Launcher", Content = "No URL set for "..name, Duration = 3 })
                return
            end
            Rayfield:Notify({ Title = "Launcher", Content = "Loading "..name, Duration = 2 })
            local ok, err = pcall(function()
                local scriptText = game:HttpGet(url, true)
                local fn = loadstring(scriptText)
                if type(fn) == "function" then fn() end
            end)
            if not ok then
                Rayfield:Notify({ Title = "Launcher", Content = "Failed to load "..name, Duration = 3 })
                warn("Hub load error:", err)
            else
                Rayfield:Notify({ Title = "Launcher", Content = name.." loaded", Duration = 2 })
            end
        end
    })
end
